<?php

namespace Application\Migrations;

use Doctrine\DBAL\Migrations\AbstractMigration;
use Doctrine\DBAL\Schema\Schema;

/**
 * Auto-generated Migration: Please modify to your needs!
 */
class Version20171124122657 extends AbstractMigration
{
    /**
     * @param Schema $schema
     */
    public function up(Schema $schema)
    {
        // this up() migration is auto-generated, please modify it to your needs
        $this->abortIf($this->connection->getDatabasePlatform()->getName() !== 'mysql', 'Migration can only be executed safely on \'mysql\'.');

        $this->addSql('DROP TABLE ImportTemporary');
        $this->addSql('DROP TABLE ImportTemporary_Event');
        $this->addSql('ALTER TABLE Event CHANGE importid import_id INT DEFAULT NULL');
        $this->addSql('UPDATE Event SET import_id = NULL WHERE import_id = 0;');
        $this->addSql('ALTER TABLE Event ADD CONSTRAINT FK_FA6F25A3B6A263D9 FOREIGN KEY (import_id) REFERENCES ImportLog (id)');
        $this->addSql('CREATE INDEX IDX_FA6F25A3B6A263D9 ON Event (import_id)');
        $this->addSql('ALTER TABLE EventCategory ADD import_id INT DEFAULT NULL');
        $this->addSql('ALTER TABLE EventCategory ADD CONSTRAINT FK_BD5B78B0B6A263D9 FOREIGN KEY (import_id) REFERENCES ImportLog (id)');
        $this->addSql('CREATE INDEX IDX_BD5B78B0B6A263D9 ON EventCategory (import_id)');
        $this->addSql('ALTER TABLE Listing CHANGE importid import_id INT DEFAULT NULL');
        $this->addSql('UPDATE Listing SET import_id = NULL WHERE import_id = 0;');
        $this->addSql('ALTER TABLE Listing ADD CONSTRAINT FK_4BD7148B6A263D9 FOREIGN KEY (import_id) REFERENCES ImportLog (id)');
        $this->addSql('CREATE INDEX IDX_4BD7148B6A263D9 ON Listing (import_id)');
        $this->addSql('ALTER TABLE ListingCategory ADD import_id INT DEFAULT NULL');
        $this->addSql('ALTER TABLE ListingCategory ADD CONSTRAINT FK_1C89DF3BB6A263D9 FOREIGN KEY (import_id) REFERENCES ImportLog (id)');
        $this->addSql('CREATE INDEX IDX_1C89DF3BB6A263D9 ON ListingCategory (import_id)');
        $this->addSql('ALTER TABLE ImportLog ADD has_header TINYINT(1) NOT NULL, ADD module VARCHAR(50) NOT NULL, ADD createdAt DATETIME NOT NULL, ADD updatedAt DATETIME NOT NULL, ADD level VARCHAR(255) DEFAULT NULL, ADD should_update_friendly_url TINYINT(1) DEFAULT NULL, ADD should_update_existing_data TINYINT(1) DEFAULT NULL, ADD is_new_categories_featured TINYINT(1) DEFAULT NULL, ADD is_imported_items_active TINYINT(1) DEFAULT NULL, ADD error_lines INT DEFAULT 0 NOT NULL, ADD total_lines INT DEFAULT 0 NOT NULL, DROP date, DROP time, DROP linesadded, DROP phisicalname, DROP action, DROP progress, DROP totallines, DROP errorlines, DROP itens_added, DROP accounts_added, DROP history, DROP update_itens, DROP from_export, DROP active_item, DROP update_friendlyurl, DROP featured_categs, DROP default_level, DROP same_account, DROP mysqlerror, CHANGE status status VARCHAR(255) NOT NULL, CHANGE delimiter delimiter VARCHAR(255) DEFAULT NULL, CHANGE type content_type VARCHAR(20) NOT NULL');
    }

    /**
     * @param Schema $schema
     */
    public function down(Schema $schema)
    {
        // this down() migration is auto-generated, please modify it to your needs
        $this->abortIf($this->connection->getDatabasePlatform()->getName() !== 'mysql', 'Migration can only be executed safely on \'mysql\'.');

        $this->addSql('CREATE TABLE ImportTemporary (id BIGINT AUTO_INCREMENT NOT NULL, import_log_id INT NOT NULL, account_username VARCHAR(255) DEFAULT NULL COLLATE utf8_unicode_ci, account_password VARCHAR(255) DEFAULT NULL COLLATE utf8_unicode_ci, account_first_name VARCHAR(255) DEFAULT NULL COLLATE utf8_unicode_ci, account_last_name VARCHAR(255) DEFAULT NULL COLLATE utf8_unicode_ci, account_company VARCHAR(255) DEFAULT NULL COLLATE utf8_unicode_ci, account_address VARCHAR(255) DEFAULT NULL COLLATE utf8_unicode_ci, account_address2 VARCHAR(255) DEFAULT NULL COLLATE utf8_unicode_ci, account_country VARCHAR(255) DEFAULT NULL COLLATE utf8_unicode_ci, account_state VARCHAR(255) DEFAULT NULL COLLATE utf8_unicode_ci, account_city VARCHAR(255) DEFAULT NULL COLLATE utf8_unicode_ci, account_zip VARCHAR(255) DEFAULT NULL COLLATE utf8_unicode_ci, account_phone VARCHAR(255) DEFAULT NULL COLLATE utf8_unicode_ci, account_fax VARCHAR(255) DEFAULT NULL COLLATE utf8_unicode_ci, account_email VARCHAR(255) DEFAULT NULL COLLATE utf8_unicode_ci, account_url VARCHAR(255) DEFAULT NULL COLLATE utf8_unicode_ci, listing_id INT DEFAULT NULL, listing_title VARCHAR(255) DEFAULT NULL COLLATE utf8_unicode_ci, listing_seo_title VARCHAR(255) DEFAULT NULL COLLATE utf8_unicode_ci, listing_email VARCHAR(255) DEFAULT NULL COLLATE utf8_unicode_ci, listing_url VARCHAR(255) DEFAULT NULL COLLATE utf8_unicode_ci, listing_address VARCHAR(255) DEFAULT NULL COLLATE utf8_unicode_ci, listing_address2 VARCHAR(255) DEFAULT NULL COLLATE utf8_unicode_ci, listing_location1 VARCHAR(255) DEFAULT NULL COLLATE utf8_unicode_ci, listing_location1_abbreviation VARCHAR(5) DEFAULT NULL COLLATE utf8_unicode_ci, listing_location2 VARCHAR(255) DEFAULT NULL COLLATE utf8_unicode_ci, listing_location2_abbreviation VARCHAR(5) DEFAULT NULL COLLATE utf8_unicode_ci, listing_location3 VARCHAR(255) DEFAULT NULL COLLATE utf8_unicode_ci, listing_location3_abbreviation VARCHAR(5) DEFAULT NULL COLLATE utf8_unicode_ci, listing_location4 VARCHAR(255) DEFAULT NULL COLLATE utf8_unicode_ci, listing_location4_abbreviation VARCHAR(5) DEFAULT NULL COLLATE utf8_unicode_ci, listing_location5 VARCHAR(255) DEFAULT NULL COLLATE utf8_unicode_ci, listing_location5_abbreviation VARCHAR(5) DEFAULT NULL COLLATE utf8_unicode_ci, listing_zip VARCHAR(255) DEFAULT NULL COLLATE utf8_unicode_ci, listing_latitude VARCHAR(50) DEFAULT NULL COLLATE utf8_unicode_ci, listing_longitude VARCHAR(50) DEFAULT NULL COLLATE utf8_unicode_ci, listing_phone VARCHAR(255) DEFAULT NULL COLLATE utf8_unicode_ci, listing_fax VARCHAR(255) DEFAULT NULL COLLATE utf8_unicode_ci, listing_description LONGTEXT DEFAULT NULL COLLATE utf8_unicode_ci, listing_long_description TEXT DEFAULT NULL COLLATE utf8_unicode_ci, listing_seo_description VARCHAR(255) DEFAULT NULL COLLATE utf8_unicode_ci, listing_keyword VARCHAR(255) DEFAULT NULL COLLATE utf8_unicode_ci, listing_renewal_date VARCHAR(255) DEFAULT NULL COLLATE utf8_unicode_ci, listing_status VARCHAR(255) DEFAULT NULL COLLATE utf8_unicode_ci, listing_level VARCHAR(255) DEFAULT NULL COLLATE utf8_unicode_ci, listing_category_1 TEXT DEFAULT NULL COLLATE utf8_unicode_ci, listing_category_2 TEXT DEFAULT NULL COLLATE utf8_unicode_ci, listing_category_3 TEXT DEFAULT NULL COLLATE utf8_unicode_ci, listing_category_4 TEXT DEFAULT NULL COLLATE utf8_unicode_ci, listing_category_5 TEXT DEFAULT NULL COLLATE utf8_unicode_ci, listing_template VARCHAR(255) DEFAULT NULL COLLATE utf8_unicode_ci, custom_id VARCHAR(255) DEFAULT NULL COLLATE utf8_unicode_ci, file_line_number INT NOT NULL, inserted VARCHAR(1) DEFAULT \'n\' NOT NULL COLLATE utf8_unicode_ci, error VARCHAR(1) DEFAULT \'n\' NOT NULL COLLATE utf8_unicode_ci, PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB');
        $this->addSql('CREATE TABLE ImportTemporary_Event (id BIGINT AUTO_INCREMENT NOT NULL, import_log_id INT NOT NULL, account_username VARCHAR(255) DEFAULT NULL COLLATE utf8_unicode_ci, account_password VARCHAR(255) DEFAULT NULL COLLATE utf8_unicode_ci, account_first_name VARCHAR(255) DEFAULT NULL COLLATE utf8_unicode_ci, account_last_name VARCHAR(255) DEFAULT NULL COLLATE utf8_unicode_ci, account_company VARCHAR(255) DEFAULT NULL COLLATE utf8_unicode_ci, account_address VARCHAR(255) DEFAULT NULL COLLATE utf8_unicode_ci, account_address2 VARCHAR(255) DEFAULT NULL COLLATE utf8_unicode_ci, account_country VARCHAR(255) DEFAULT NULL COLLATE utf8_unicode_ci, account_state VARCHAR(255) DEFAULT NULL COLLATE utf8_unicode_ci, account_city VARCHAR(255) DEFAULT NULL COLLATE utf8_unicode_ci, account_zip VARCHAR(255) DEFAULT NULL COLLATE utf8_unicode_ci, account_phone VARCHAR(255) DEFAULT NULL COLLATE utf8_unicode_ci, account_fax VARCHAR(255) DEFAULT NULL COLLATE utf8_unicode_ci, account_email VARCHAR(255) DEFAULT NULL COLLATE utf8_unicode_ci, account_url VARCHAR(255) DEFAULT NULL COLLATE utf8_unicode_ci, event_id INT DEFAULT NULL, event_title VARCHAR(255) DEFAULT NULL COLLATE utf8_unicode_ci, event_seo_title VARCHAR(255) DEFAULT NULL COLLATE utf8_unicode_ci, event_email VARCHAR(255) DEFAULT NULL COLLATE utf8_unicode_ci, event_url VARCHAR(255) DEFAULT NULL COLLATE utf8_unicode_ci, event_address VARCHAR(255) DEFAULT NULL COLLATE utf8_unicode_ci, event_locationname VARCHAR(255) DEFAULT NULL COLLATE utf8_unicode_ci, event_contactname VARCHAR(255) DEFAULT NULL COLLATE utf8_unicode_ci, event_startdate VARCHAR(255) DEFAULT NULL COLLATE utf8_unicode_ci, event_enddate VARCHAR(255) DEFAULT NULL COLLATE utf8_unicode_ci, event_starttime VARCHAR(255) DEFAULT NULL COLLATE utf8_unicode_ci, event_starttime_mode VARCHAR(255) DEFAULT NULL COLLATE utf8_unicode_ci, event_endtime VARCHAR(255) DEFAULT NULL COLLATE utf8_unicode_ci, event_endtime_mode VARCHAR(255) DEFAULT NULL COLLATE utf8_unicode_ci, event_location1 VARCHAR(255) DEFAULT NULL COLLATE utf8_unicode_ci, event_location1_abbreviation VARCHAR(5) DEFAULT NULL COLLATE utf8_unicode_ci, event_location2 VARCHAR(255) DEFAULT NULL COLLATE utf8_unicode_ci, event_location2_abbreviation VARCHAR(5) DEFAULT NULL COLLATE utf8_unicode_ci, event_location3 VARCHAR(255) DEFAULT NULL COLLATE utf8_unicode_ci, event_location3_abbreviation VARCHAR(5) DEFAULT NULL COLLATE utf8_unicode_ci, event_location4 VARCHAR(255) DEFAULT NULL COLLATE utf8_unicode_ci, event_location4_abbreviation VARCHAR(5) DEFAULT NULL COLLATE utf8_unicode_ci, event_location5 VARCHAR(255) DEFAULT NULL COLLATE utf8_unicode_ci, event_location5_abbreviation VARCHAR(5) DEFAULT NULL COLLATE utf8_unicode_ci, event_zip VARCHAR(255) DEFAULT NULL COLLATE utf8_unicode_ci, event_latitude VARCHAR(50) DEFAULT NULL COLLATE utf8_unicode_ci, event_longitude VARCHAR(50) DEFAULT NULL COLLATE utf8_unicode_ci, event_phone VARCHAR(255) DEFAULT NULL COLLATE utf8_unicode_ci, event_description LONGTEXT DEFAULT NULL COLLATE utf8_unicode_ci, event_long_description TEXT DEFAULT NULL COLLATE utf8_unicode_ci, event_seo_description VARCHAR(255) DEFAULT NULL COLLATE utf8_unicode_ci, event_keyword VARCHAR(255) DEFAULT NULL COLLATE utf8_unicode_ci, event_renewal_date VARCHAR(255) DEFAULT NULL COLLATE utf8_unicode_ci, event_status VARCHAR(255) DEFAULT NULL COLLATE utf8_unicode_ci, event_level VARCHAR(255) DEFAULT NULL COLLATE utf8_unicode_ci, event_category_1 TEXT DEFAULT NULL COLLATE utf8_unicode_ci, event_category_2 TEXT DEFAULT NULL COLLATE utf8_unicode_ci, event_category_3 TEXT DEFAULT NULL COLLATE utf8_unicode_ci, event_category_4 TEXT DEFAULT NULL COLLATE utf8_unicode_ci, event_category_5 TEXT DEFAULT NULL COLLATE utf8_unicode_ci, custom_id VARCHAR(255) DEFAULT NULL COLLATE utf8_unicode_ci, file_line_number INT NOT NULL, inserted VARCHAR(1) DEFAULT \'n\' NOT NULL COLLATE utf8_unicode_ci, error VARCHAR(1) DEFAULT \'n\' NOT NULL COLLATE utf8_unicode_ci, PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB');
        $this->addSql('ALTER TABLE Event DROP FOREIGN KEY FK_FA6F25A3B6A263D9');
        $this->addSql('DROP INDEX IDX_FA6F25A3B6A263D9 ON Event');
        $this->addSql('ALTER TABLE Event CHANGE import_id importID INT DEFAULT NULL');
        $this->addSql('ALTER TABLE EventCategory DROP FOREIGN KEY FK_BD5B78B0B6A263D9');
        $this->addSql('DROP INDEX IDX_BD5B78B0B6A263D9 ON EventCategory');
        $this->addSql('ALTER TABLE EventCategory DROP import_id');
        $this->addSql('ALTER TABLE ImportLog ADD date DATE NOT NULL, ADD time TIME NOT NULL, ADD linesadded VARCHAR(255) NOT NULL COLLATE utf8_unicode_ci, ADD phisicalname VARCHAR(255) NOT NULL COLLATE utf8_unicode_ci, ADD action VARCHAR(2) NOT NULL COLLATE utf8_unicode_ci, ADD progress VARCHAR(5) NOT NULL COLLATE utf8_unicode_ci, ADD totallines VARCHAR(255) NOT NULL COLLATE utf8_unicode_ci, ADD errorlines VARCHAR(255) NOT NULL COLLATE utf8_unicode_ci, ADD itens_added INT NOT NULL, ADD accounts_added INT NOT NULL, ADD history LONGTEXT NOT NULL COLLATE utf8_unicode_ci, ADD update_itens VARCHAR(1) NOT NULL COLLATE utf8_unicode_ci, ADD from_export VARCHAR(1) NOT NULL COLLATE utf8_unicode_ci, ADD active_item VARCHAR(1) NOT NULL COLLATE utf8_unicode_ci, ADD update_friendlyurl VARCHAR(1) NOT NULL COLLATE utf8_unicode_ci, ADD featured_categs VARCHAR(1) NOT NULL COLLATE utf8_unicode_ci, ADD default_level VARCHAR(3) NOT NULL COLLATE utf8_unicode_ci, ADD same_account VARCHAR(1) NOT NULL COLLATE utf8_unicode_ci, ADD mysqlerror VARCHAR(255) NOT NULL COLLATE utf8_unicode_ci, DROP has_header, DROP module, DROP createdAt, DROP updatedAt, DROP level, DROP should_update_friendly_url, DROP should_update_existing_data, DROP is_new_categories_featured, DROP is_imported_items_active, DROP error_lines, DROP total_lines, CHANGE delimiter delimiter VARCHAR(3) NOT NULL COLLATE utf8_unicode_ci, CHANGE status status VARCHAR(1) NOT NULL COLLATE utf8_unicode_ci, CHANGE content_type type VARCHAR(20) NOT NULL COLLATE utf8_unicode_ci');
        $this->addSql('ALTER TABLE Listing DROP FOREIGN KEY FK_4BD7148B6A263D9');
        $this->addSql('DROP INDEX IDX_4BD7148B6A263D9 ON Listing');
        $this->addSql('ALTER TABLE Listing CHANGE import_id importID INT DEFAULT NULL');
        $this->addSql('ALTER TABLE ListingCategory DROP FOREIGN KEY FK_1C89DF3BB6A263D9');
        $this->addSql('DROP INDEX IDX_1C89DF3BB6A263D9 ON ListingCategory');
        $this->addSql('ALTER TABLE ListingCategory DROP import_id');
    }
}
